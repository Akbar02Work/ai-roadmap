# Required DB migrations before staging/prod rollout:
# - supabase/migrations/0001_rls.sql
# - supabase/migrations/0002_usage_rpc.sql
# - supabase/migrations/0003_profiles_trigger.sql

# === Supabase ===
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-supabase-anon-key

# === Database (Prisma) ===
# Direct connection for migrations and queries
DIRECT_URL=postgresql://user:password@host:5432/postgres
# Pooled connection (PgBouncer) for app runtime queries
DATABASE_URL=postgresql://user:password@host:6543/postgres?pgbouncer=true

# === OpenAI (primary LLM provider) ===
OPENAI_API_KEY=sk-...

# === Anthropic (fallback LLM provider) ===
ANTHROPIC_API_KEY=sk-ant-...

# === OpenRouter (onboarding/diagnostics) ===
OPENROUTER_API_KEY=sk-or-v1-...
OPENROUTER_MODEL=google/gemini-2.5-flash
# Required for provider attribution / allow-listing.
OPENROUTER_REFERER=https://ai-roadmap.app
OPENROUTER_TITLE=AI Roadmap

# === Stripe ===
STRIPE_SECRET_KEY=sk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# === Upstash Redis (rate limiting) ===
# If not set/misconfigured:
# - production: fail-closed (503) on rate-limited endpoints
# - development/test: in-memory fallback limiter is used
UPSTASH_REDIS_REST_URL=https://...upstash.io
UPSTASH_REDIS_REST_TOKEN=AX...

# === LLM Test Endpoint ===
# /api/llm/test is disabled in production by default.
# Set to "true" to enable (not recommended for public deployments).
# ENABLE_LLM_TEST_ENDPOINT=true
